<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ù…Ù„ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <meta name="theme-color" content="#2c3e50">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --warning-color: #e74c3c;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --manager-color: #9b59b6;
            --worker-color: #f39c12;
            --sync-color: #1abc9c;
            --edit-color: #f39c12;
            --share-color: #9b59b6;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            padding-top: 150px;
        }
        
        .fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .container {
            max-width: 100%;
            padding: 15px;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6580);
            color: white;
            padding: 10px 15px;
            text-align: center;
            margin-bottom: 0;
            border-radius: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            height: 70px;
        }
        
        .app-version {
            position: absolute;
            top: 5px;
            left: 10px;
            font-size: 0.7rem;
            opacity: 0.8;
        }
        
        .sync-status {
            position: absolute;
            top: 5px;
            right: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.7rem;
        }
        
        .sync-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            animation: pulse 2s infinite;
        }
        
        .sync-indicator.syncing {
            background-color: var(--sync-color);
        }
        
        .sync-indicator.offline {
            background-color: var(--warning-color);
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .user-badge {
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .user-manager {
            background-color: var(--manager-color);
        }
        
        .user-worker {
            background-color: var(--worker-color);
        }
        
        .logout-btn {
            background-color: var(--warning-color);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .nav-tabs {
            display: flex;
            background-color: white;
            border-radius: 0;
            overflow: hidden;
            margin-bottom: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            height: 50px;
        }
        
        .nav-tab {
            flex: 1;
            padding: 12px;
            background-color: #ddd;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            text-align: center;
            font-size: 0.9rem;
            position: relative;
        }
        
        .nav-tab.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .page {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            margin-top: 15px;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .add-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .upload-area {
            border: 2px dashed var(--primary-color);
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 15px;
            border-radius: 10px;
            background-color: #f8f9fa;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background-color: #e3f2fd;
        }
        
        .upload-icon {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-success {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }
        
        .btn-secondary {
            background-color: #7f8c8d;
            color: white;
        }
        
        .btn-edit {
            background-color: var(--edit-color);
            color: white;
        }
        
        .btn-share {
            background-color: var(--share-color);
            color: white;
        }
        
        .content-list {
            margin-top: 20px;
        }
        
        .content-card {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .content-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .content-image {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 10px;
            max-height: 500px;
            object-fit: contain;
        }
        
        .content-details {
            margin-bottom: 15px;
            line-height: 1.6;
            white-space: pre-line;
        }
        
        .content-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .status-pending {
            background-color: #f39c12;
            color: white;
        }
        
        .status-progress {
            background-color: var(--primary-color);
            color: white;
        }
        
        .status-completed {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .status-ready {
            background-color: #27ae60;
            color: white;
        }
        
        .status-not-ready {
            background-color: #e74c3c;
            color: white;
        }
        
        .notification {
            position: fixed;
            top: 150px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            border-right: 4px solid var(--primary-color);
            animation: slideIn 0.3s ease;
            max-width: 90%;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-success {
            border-right-color: var(--secondary-color);
        }
        
        .notification-error {
            border-right-color: var(--warning-color);
        }
        
        .notification-sync {
            border-right-color: var(--sync-color);
        }
        
        .hidden {
            display: none;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #777;
        }
        
        .empty-state i {
            font-size: 60px;
            margin-bottom: 15px;
            color: #ccc;
        }
        
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        .login-logo {
            text-align: center;
            margin-bottom: 20px;
            font-size: 3rem;
            color: var(--primary-color);
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .error-message {
            color: var(--warning-color);
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background-color: #ffebee;
            border-radius: 4px;
            display: none;
        }
        
        .worker-hidden {
            display: none;
        }
        
        .edit-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .edit-form {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .admin-controls {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--manager-color);
        }
        
        .message-form {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .priority-selector {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        .priority-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            background: white;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .priority-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid var(--primary-color);
        }
        
        .stat-card h3 {
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-card.models {
            border-left-color: var(--secondary-color);
        }
        
        .stat-card.models .stat-number {
            color: var(--secondary-color);
        }
        
        .stat-card.messages {
            border-left-color: #f39c12;
        }
        
        .stat-card.messages .stat-number {
            color: #f39c12;
        }
        
        .orders-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .order-stat {
            background: #e8f4fc;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .order-stat.pending {
            background: #fff3cd;
            border-left: 3px solid #f39c12;
        }
        
        .order-stat.progress {
            background: #e3f2fd;
            border-left: 3px solid var(--primary-color);
        }
        
        .order-stat.completed {
            background: #e8f5e8;
            border-left: 3px solid var(--secondary-color);
        }
        
        .order-stat-number {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .page-title {
            margin-bottom: 10px;
            color: var(--dark-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }
        
        .image-quality-info {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            border-right: 4px solid var(--secondary-color);
        }
        
        .upload-progress {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            border-right: 4px solid var(--primary-color);
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            transition: width 0.3s ease;
            width: 0%;
        }
        
        /* Ø£Ù†Ù…Ø§Ø· Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© */
        .share-controls {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--share-color);
        }
        
        .share-link-container {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        .share-link-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
            font-size: 14px;
        }
        
        .share-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .shared-page {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .shared-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .shared-title {
            color: var(--dark-color);
            margin: 0;
        }
        
        .shared-message {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            border-right: 4px solid var(--secondary-color);
        }
        
        .whatsapp-share {
            background: #25D366;
            color: white;
        }
        
        .whatsapp-share:hover {
            background: #128C7E;
        }
        
        .share-config {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 4px solid #f39c12;
        }
        
        .share-config h4 {
            margin-bottom: 10px;
            color: #856404;
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 180px;
            }
            
            .notification {
                top: 180px;
            }
            
            header {
                flex-direction: column;
                gap: 5px;
                height: auto;
                padding: 8px 15px;
            }
            
            .nav-tabs {
                height: auto;
            }
            
            .nav-tab {
                padding: 10px;
                font-size: 0.8rem;
            }
            
            .share-link-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- ÙˆØ§Ø¬Ù‡Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="login-page" class="login-container">
        <div class="login-logo">
            <i class="fas fa-lab"></i>
        </div>
        
        <h2 class="login-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ù…Ù„</h2>
        
        <div class="login-form">
            <div class="form-group">
                <label for="username">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
                <input type="text" id="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            </div>
            
            <div class="form-group">
                <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
                <input type="password" id="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            
            <div class="form-group">
                <label for="device-name">Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²:</label>
                <input type="text" id="device-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²">
            </div>
            
            <button id="login-btn" class="btn btn-primary">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            
            <div id="error-message" class="error-message">
                Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©
            </div>
        </div>
        
        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
            
            
        </div>
    </div>
    
    <!-- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div id="app-container" class="container hidden">
        <!-- Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ø«Ø§Ø¨Øª -->
        <div class="fixed-header">
            <header>
                <span class="app-version">Ø§Ù„Ø¥ØµØ¯Ø§Ø± 14.0</span>
                <div class="sync-status">
                    <span id="sync-status-text">Ù…ØªØµÙ„</span>
                    <div id="sync-indicator" class="sync-indicator"></div>
                </div>
                <h1 style="font-size: 1.2rem; margin: 0;">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ù…Ù„</h1>
                <div class="user-info">
                    <span id="user-display-name" style="font-size: 0.9rem;">Ù…Ø³ØªØ®Ø¯Ù…</span>
                    <span id="user-role-badge" class="user-badge">Ø¯ÙˆØ±</span>
                    <button id="logout-btn" class="logout-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ <i class="fas fa-sign-out-alt"></i></button>
                </div>
            </header>
            
            <div class="nav-tabs">
                <button class="nav-tab active" data-page="orders-page">
                    <i class="fas fa-tasks"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                </button>
                <button class="nav-tab" data-page="models-page">
                    <i class="fas fa-images"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª
                </button>
                <button class="nav-tab" data-page="message-page">
                    <i class="fas fa-envelope"></i> Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
                </button>
                <button class="nav-tab" data-page="counters-page">
                    <i class="fas fa-chart-bar"></i> Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>
        </div>
        
        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø§Øª -->
        <div id="pages-container">
            <!-- ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
            <div id="orders-page" class="page active">
                <h2 class="page-title"><i class="fas fa-tasks"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
                
                <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØµØ­ÙŠØ­ -->
                <div style="margin: 10px 0; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button onclick="testFirebaseConnection()" class="btn btn-primary">
                        <i class="fas fa-wifi"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
                    </button>
                    <button onclick="checkDataSize()" class="btn btn-secondary">
                        <i class="fas fa-database"></i> ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <button onclick="resetOrdersData()" class="btn btn-warning">
                        <i class="fas fa-sync-alt"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
                    </button>
                </div>
                
                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© -->
                <div class="image-quality-info">
                    <i class="fas fa-info-circle"></i> 
                    <strong>Ù…Ø²Ø§Ù…Ù†Ø© ÙÙˆØ±ÙŠØ© Ù„Ù„ØµÙˆØ±</strong> - Ø§Ù„ØµÙˆØ± ØªØ¸Ù‡Ø± ÙÙˆØ±Ø§Ù‹ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ØªØµÙ„Ø©
                </div>
                
                <!-- Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ø·Ù„Ø¨Ø§Øª -->
                <div class="orders-stats">
                    <div class="order-stat pending">
                        <div class="order-stat-number" id="quick-pending">0</div>
                        <div>ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
                    </div>
                    <div class="order-stat progress">
                        <div class="order-stat-number" id="quick-progress">0</div>
                        <div>Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</div>
                    </div>
                    <div class="order-stat completed">
                        <div class="order-stat-number" id="quick-completed">0</div>
                        <div>Ù…ÙƒØªÙ…Ù„Ø©</div>
                    </div>
                    <div class="order-stat">
                        <div class="order-stat-number" id="quick-total">0</div>
                        <div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
                    </div>
                </div>
                
                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ (Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·) -->
                <div id="order-form-container">
                    <div class="add-form" id="order-form">
                        <h3><i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
                        <div class="form-group">
                            <label for="order-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø·Ù„Ø¨:</label>
                            <input type="text" id="order-title" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ø·Ù„Ø¨">
                        </div>
                        
                        <div class="form-group">
                            <label for="order-details">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:</label>
                            <textarea id="order-details" placeholder="Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨"></textarea>
                        </div>
                        
                        <div class="upload-area" id="order-upload-area">
                            <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                            <p>Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„Ø·Ù„Ø¨</p>
                            <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                                <i class="fas fa-check-circle"></i> Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
                            </p>
                            <input type="file" id="order-image-input" accept="image/*" class="hidden">
                        </div>
                        
                        <div id="order-upload-progress" class="upload-progress hidden">
                            <i class="fas fa-sync-alt fa-spin"></i>
                            <strong>Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...</strong>
                            <div class="progress-bar">
                                <div class="progress-fill" id="order-progress-fill"></div>
                            </div>
                            <span id="order-progress-text">0%</span>
                        </div>
                        
                        <div id="order-image-preview-container" class="hidden">
                            <img id="order-image-preview" class="content-image">
                            <div style="text-align: center; margin-top: 10px;">
                                <span id="order-image-size" style="color: #666; font-size: 0.9rem;"></span>
                            </div>
                        </div>
                        
                        <button id="add-order-btn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨
                        </button>
                    </div>
                </div>
                
                <h3><i class="fas fa-list"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                <div class="form-group">
                    <input type="text" id="search-orders" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª...">
                </div>
                <div id="orders-list" class="content-list">
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
                    </div>
                </div>
            </div>
            
            <!-- ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª -->
            <div id="models-page" class="page">
                <h2 class="page-title"><i class="fas fa-images"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</h2>
                
                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© -->
                <div class="image-quality-info">
                    <i class="fas fa-info-circle"></i> 
                    <strong>Ù…Ø²Ø§Ù…Ù†Ø© ÙÙˆØ±ÙŠØ© Ù„Ù„ØµÙˆØ±</strong>
                </div>
                
                <!-- Ø£Ø¯ÙˆØ§Øª Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª (Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·) -->
                <div id="share-controls-container" class="share-controls">
                    <h3><i class="fas fa-share-alt"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
                    <p>Ø£Ù†Ø´Ø¦ Ø±Ø§Ø¨Ø·Ø§Ù‹ Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡. ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·.</p>
                    
                    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø§Ø¨Ø· -->
                    <div class="share-config">
                        <h4><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø§Ø¨Ø·</h4>
                        <div class="form-group">
                            <label for="custom-base-url">Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
                            <input type="text" id="custom-base-url" placeholder="https://example.com/app" style="font-size: 14px;">
                            <small style="color: #666;">Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚</small>
                        </div>
                        <button id="save-base-url" class="btn btn-secondary" style="font-size: 14px;">
                            <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                        </button>
                    </div>
                    
                    <div class="share-actions">
                        <button id="generate-share-link" class="btn btn-share">
                            <i class="fas fa-link"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù…Ø´Ø§Ø±ÙƒØ© Ø¬Ø¯ÙŠØ¯
                        </button>
                        <button id="copy-share-link" class="btn btn-secondary">
                            <i class="fas fa-copy"></i> Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                        </button>
                        <button id="whatsapp-share-link" class="btn whatsapp-share">
                            <i class="fab fa-whatsapp"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                        </button>
                        <button id="deactivate-share-link" class="btn btn-warning">
                            <i class="fas fa-ban"></i> Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·
                        </button>
                    </div>
                    
                    <div id="share-link-container" class="share-link-container hidden">
                        <input type="text" id="share-link-input" class="share-link-input" readonly>
                    </div>
                    
                    <div id="share-info" class="image-quality-info hidden">
                        <i class="fas fa-info-circle"></i>
                        <strong>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ø§Ø¨Ø·:</strong>
                        <span id="share-status">ØºÙŠØ± Ù…ÙØ¹Ù„</span>
                    </div>
                </div>
                
                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¯ÙŠÙ„ (Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·) -->
                <div id="model-form-container">
                    <div class="add-form" id="model-form">
                        <h3><i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¯ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h3>
                        <div class="form-group">
                            <label for="model-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:</label>
                            <input type="text" id="model-title" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„">
                        </div>
                        
                        <div class="form-group">
                            <label for="model-description">ÙˆØµÙ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:</label>
                            <textarea id="model-description" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„"></textarea>
                        </div>
                        
                        <div class="upload-area" id="model-upload-area">
                            <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                            <p>Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„</p>
                            <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                                <i class="fas fa-check-circle"></i> Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
                            </p>
                            <input type="file" id="model-image-input" accept="image/*" class="hidden">
                        </div>
                        
                        <div id="model-upload-progress" class="upload-progress hidden">
                            <i class="fas fa-sync-alt fa-spin"></i>
                            <strong>Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...</strong>
                            <div class="progress-bar">
                                <div class="progress-fill" id="model-progress-fill"></div>
                            </div>
                            <span id="model-progress-text">0%</span>
                        </div>
                        
                        <div id="model-image-preview-container" class="hidden">
                            <img id="model-image-preview" class="content-image">
                            <div style="text-align: center; margin-top: 10px;">
                                <span id="model-image-size" style="color: #666; font-size: 0.9rem;"></span>
                            </div>
                        </div>
                        
                        <button id="add-model-btn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„
                        </button>
                    </div>
                </div>
                
                <h3><i class="fas fa-list"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</h3>
                <div class="form-group">
                    <input type="text" id="search-models" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª...">
                </div>
                <div id="models-list" class="content-list">
                    <div class="empty-state">
                        <i class="fas fa-images"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
                    </div>
                </div>
            </div>
            
            <!-- ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
            <div id="message-page" class="page">
                <h2 class="page-title"><i class="fas fa-envelope"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h2>
                
                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© -->
                <div class="image-quality-info">
                    <i class="fas fa-info-circle"></i> 
                    <strong>Ù…Ø²Ø§Ù…Ù†Ø© ÙÙˆØ±ÙŠØ© Ù„Ù„ØµÙˆØ±</strong>
                </div>
                
                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© -->
                <div class="message-form">
                    <h3><i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                    <div class="form-group">
                        <label for="message-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©:</label>
                        <input type="text" id="message-title" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ø±Ø³Ø§Ù„Ø©">
                    </div>
                    
                    <div class="form-group">
                        <label for="message-content">Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:</label>
                        <textarea id="message-content" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø©:</label>
                        <div class="priority-selector">
                            <div class="priority-btn normal active" data-priority="normal">Ø¹Ø§Ø¯ÙŠØ©</div>
                            <div class="priority-btn important" data-priority="important">Ù…Ù‡Ù…Ø©</div>
                            <div class="priority-btn urgent" data-priority="urgent">Ø¹Ø§Ø¬Ù„Ø©</div>
                        </div>
                    </div>
                    
                    <!-- Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„Ø±Ø³Ø§Ù„Ø© -->
                    <div class="upload-area" id="message-upload-area">
                        <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                        <p>Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„Ø±Ø³Ø§Ù„Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</p>
                        <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                            <i class="fas fa-check-circle"></i>
                        </p>
                        <input type="file" id="message-image-input" accept="image/*" class="hidden">
                    </div>
                    
                    <div id="message-upload-progress" class="upload-progress hidden">
                        <i class="fas fa-sync-alt fa-spin"></i>
                        <strong>Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...</strong>
                        <div class="progress-bar">
                            <div class="progress-fill" id="message-progress-fill"></div>
                        </div>
                        <span id="message-progress-text">0%</span>
                    </div>
                    
                    <div id="message-image-preview-container" class="hidden">
                        <img id="message-image-preview" class="content-image">
                        <div style="text-align: center; margin-top: 10px;">
                            <span id="message-image-size" style="color: #666; font-size: 0.9rem;"></span>
                        </div>
                    </div>
                    
                    <button id="send-message-btn" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                    </button>
                </div>
                
                <h3><i class="fas fa-inbox"></i> Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h3>
                <div class="form-group">
                    <input type="text" id="search-messages" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„...">
                </div>
                <div id="messages-list" class="content-list">
                    <div class="empty-state">
                        <i class="fas fa-envelope-open"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
                    </div>
                </div>
            </div>
            
            <!-- ØµÙØ­Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div id="counters-page" class="page">
                <h2 class="page-title"><i class="fas fa-chart-bar"></i> Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                        <div class="stat-number" id="stats-orders-total">0</div>
                        <div class="orders-stats" style="margin-top: 10px;">
                            <div style="text-align: center;">
                                <div style="color: #f39c12; font-weight: bold;" id="stats-orders-pending">0</div>
                                <div style="font-size: 0.8rem;">ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: var(--primary-color); font-weight: bold;" id="stats-orders-progress">0</div>
                                <div style="font-size: 0.8rem;">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: var(--secondary-color); font-weight: bold;" id="stats-orders-completed">0</div>
                                <div style="font-size: 0.8rem;">Ù…ÙƒØªÙ…Ù„Ø©</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card models">
                        <h3>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</h3>
                        <div class="stat-number" id="stats-models-total">0</div>
                    </div>
                    
                    <div class="stat-card messages">
                        <h3>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h3>
                        <div class="stat-number" id="stats-messages-total">0</div>
                    </div>
                </div>
                
                <div class="content-card">
                    <h3><i class="fas fa-users"></i> Ù†Ø´Ø§Ø· Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ†</h3>
                    <div id="workers-activity">
                        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·...</p>
                    </div>
                </div>
                
                <div class="content-card">
                    <h3><i class="fas fa-info-circle"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    <div id="system-info">
                        <p><strong>Ø§Ù„Ø§ØªØµØ§Ù„:</strong> <span id="connection-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±...</span></p>
                        <p><strong>Ø­Ø¬Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> <span id="data-size">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...</span></p>
                        <p><strong>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</strong> <span id="last-update">-</span></p>
                        <p><strong>Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:</strong> <span id="app-url">-</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ØµÙØ­Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
    <div id="shared-models-page" class="container hidden">
        <div class="shared-page">
            <div class="shared-header">
                <h1 class="shared-title"><i class="fas fa-images"></i> Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</h1>
                <div id="shared-page-info" class="image-quality-info">
                    <i class="fas fa-info-circle"></i>
                    <strong>Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ØµØ§Ù„Ø­ Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</strong>
                </div>
            </div>
            
            <div class="shared-message">
                <h3><i class="fas fa-eye"></i> Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</h3>
                <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø£Ø¯Ù†Ø§Ù‡. Ø³ÙŠØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ù…ØºØ§Ø¯Ø±ØªÙ‡Ø§.</p>
            </div>
            
            <div id="shared-models-list" class="content-list">
                <div class="empty-state">
                    <i class="fas fa-images"></i>
                    <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª...</p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="close-shared-page" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©
                </button>
            </div>
        </div>
    </div>
    
    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="notification-container" id="notification-container"></div>
    
    <!-- Ù†Ø§ÙØ°Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙˆØ± -->
    <div id="edit-image-modal" class="edit-modal">
        <div class="edit-form">
            <h3><i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨</h3>
            <div class="form-group">
                <label for="edit-image-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø·Ù„Ø¨:</label>
                <input type="text" id="edit-image-title" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ø·Ù„Ø¨">
            </div>
            
            <div class="form-group">
                <label for="edit-image-details">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:</label>
                <textarea id="edit-image-details" placeholder="Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨"></textarea>
            </div>
            
            <div class="upload-area" id="edit-image-upload-area">
                <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                <p>Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„ØªØºÙŠÙŠØ± ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨</p>
                <input type="file" id="edit-image-input" accept="image/*" class="hidden">
            </div>
            
            <div id="edit-image-upload-progress" class="upload-progress hidden">
                <i class="fas fa-sync-alt fa-spin"></i>
                <strong>Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...</strong>
                <div class="progress-bar">
                    <div class="progress-fill" id="edit-progress-fill"></div>
                </div>
                <span id="edit-progress-text">0%</span>
            </div>
            
            <div id="edit-image-preview-container" class="hidden">
                <img id="edit-image-preview" class="content-image">
            </div>
            
            <div class="content-actions" style="margin-top: 20px;">
                <button id="save-image-changes" class="btn btn-success">
                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
                </button>
                <button id="cancel-image-edit" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª -->
    <div id="edit-model-modal" class="edit-modal">
        <div class="edit-form">
            <h3><i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</h3>
            <div class="form-group">
                <label for="edit-model-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:</label>
                <input type="text" id="edit-model-title" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„">
            </div>
            
            <div class="form-group">
                <label for="edit-model-description">ÙˆØµÙ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:</label>
                <textarea id="edit-model-description" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„"></textarea>
            </div>
            
            <div class="upload-area" id="edit-model-upload-area">
                <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                <p>Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„ØªØºÙŠÙŠØ± ØµÙˆØ±Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</p>
                <input type="file" id="edit-model-input" accept="image/*" class="hidden">
            </div>
            
            <div id="edit-model-upload-progress" class="upload-progress hidden">
                <i class="fas fa-sync-alt fa-spin"></i>
                <strong>Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...</strong>
                <div class="progress-bar">
                    <div class="progress-fill" id="edit-model-progress-fill"></div>
                </div>
                <span id="edit-model-progress-text">0%</span>
            </div>
            
            <div id="edit-model-preview-container" class="hidden">
                <img id="edit-model-preview" class="content-image">
            </div>
            
            <div class="content-actions" style="margin-top: 20px;">
                <button id="save-model-changes" class="btn btn-success">
                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
                </button>
                <button id="cancel-model-edit" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙˆØª (Ù…Ø®ÙÙŠØ© ÙˆÙ„ÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…) -->
    <audio id="notification-sound" preload="auto" class="hidden">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ğŸ”‘ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ImgBB - Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø®Ø§Øµ
        const IMGBB_API_KEY = '37178f34a52cc51bad31b8599df1cae1';

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        const APP_VERSION = "14.0";
        let orders = [];
        let models = [];
        let messages = [];
        let currentOrderImage = null;
        let currentModelImage = null;
        let currentMessageImage = null;
        let currentEditImage = null;
        let currentEditModelImage = null;
        let currentUser = null;
        let currentDeviceName = null;
        let messagePriority = 'normal';
        let firebaseInitialized = false;
        let db = null;
        let storage = null;
        let currentEditingOrderId = null;
        let currentEditingModelId = null;
        
        // ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase - Ø¶Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ù‡Ù†Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹
        const firebaseConfig = {
  apiKey: "AIzaSyD_vmfYu65hJFgOQbTudtEdlGfTnyUmoL8",
  authDomain: "al-baraka-laboratory-system.firebaseapp.com",
  projectId: "al-baraka-laboratory-system",
  storageBucket: "al-baraka-laboratory-system.firebasestorage.app",
  messagingSenderId: "23205319999",
  appId: "1:23205319999:web:5f939461e37dba5e0caf8a",
  measurementId: "G-8V25NS3932"
};
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        const users = [
            { username: "admin", password: "admin24070", name: "Ø§Ù„Ù…Ø¯ÙŠØ±", role: "manager" },
            { username: "Ø§Ù„Ù…Ø¹Ù…Ù„", password: "2407079", name: "Ø¹Ø§Ù…Ù„ Ø§Ù„Ù…Ø¹Ù…Ù„", role: "worker" }
        ];
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª
        let shareLinks = [];
        let activeShareLink = null;
        let customBaseUrl = null;
        
        // Ø¹Ù†Ø§ØµØ± DOM
        const loginPage = document.getElementById('login-page');
        const appContainer = document.getElementById('app-container');
        const sharedModelsPage = document.getElementById('shared-models-page');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const deviceNameInput = document.getElementById('device-name');
        const loginBtn = document.getElementById('login-btn');
        const errorMessage = document.getElementById('error-message');
        const userDisplayName = document.getElementById('user-display-name');
        const userRoleBadge = document.getElementById('user-role-badge');
        const logoutBtn = document.getElementById('logout-btn');
        const syncIndicator = document.getElementById('sync-indicator');
        const syncStatusText = document.getElementById('sync-status-text');
        const notificationSound = document.getElementById('notification-sound');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø§Øª
        const orderFormContainer = document.getElementById('order-form-container');
        const orderTitleInput = document.getElementById('order-title');
        const orderDetailsInput = document.getElementById('order-details');
        const orderUploadArea = document.getElementById('order-upload-area');
        const orderImageInput = document.getElementById('order-image-input');
        const orderImagePreview = document.getElementById('order-image-preview');
        const orderImagePreviewContainer = document.getElementById('order-image-preview-container');
        const orderImageSize = document.getElementById('order-image-size');
        const addOrderBtn = document.getElementById('add-order-btn');
        const ordersList = document.getElementById('orders-list');
        const orderUploadProgress = document.getElementById('order-upload-progress');
        const orderProgressFill = document.getElementById('order-progress-fill');
        const orderProgressText = document.getElementById('order-progress-text');
        
        const modelFormContainer = document.getElementById('model-form-container');
        const modelTitleInput = document.getElementById('model-title');
        const modelDescriptionInput = document.getElementById('model-description');
        const modelUploadArea = document.getElementById('model-upload-area');
        const modelImageInput = document.getElementById('model-image-input');
        const modelImagePreview = document.getElementById('model-image-preview');
        const modelImagePreviewContainer = document.getElementById('model-image-preview-container');
        const modelImageSize = document.getElementById('model-image-size');
        const addModelBtn = document.getElementById('add-model-btn');
        const modelsList = document.getElementById('models-list');
        const modelUploadProgress = document.getElementById('model-upload-progress');
        const modelProgressFill = document.getElementById('model-progress-fill');
        const modelProgressText = document.getElementById('model-progress-text');
        
        const messageTitleInput = document.getElementById('message-title');
        const messageContentInput = document.getElementById('message-content');
        const messageUploadArea = document.getElementById('message-upload-area');
        const messageImageInput = document.getElementById('message-image-input');
        const messageImagePreview = document.getElementById('message-image-preview');
        const messageImagePreviewContainer = document.getElementById('message-image-preview-container');
        const messageImageSize = document.getElementById('message-image-size');
        const sendMessageBtn = document.getElementById('send-message-btn');
        const priorityButtons = document.querySelectorAll('.priority-btn');
        const messagesList = document.getElementById('messages-list');
        const messageUploadProgress = document.getElementById('message-upload-progress');
        const messageProgressFill = document.getElementById('message-progress-fill');
        const messageProgressText = document.getElementById('message-progress-text');
        
        // Ø¹Ù†Ø§ØµØ± Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
        const shareControlsContainer = document.getElementById('share-controls-container');
        const generateShareLinkBtn = document.getElementById('generate-share-link');
        const copyShareLinkBtn = document.getElementById('copy-share-link');
        const whatsappShareLinkBtn = document.getElementById('whatsapp-share-link');
        const deactivateShareLinkBtn = document.getElementById('deactivate-share-link');
        const shareLinkContainer = document.getElementById('share-link-container');
        const shareLinkInput = document.getElementById('share-link-input');
        const shareInfo = document.getElementById('share-info');
        const shareStatus = document.getElementById('share-status');
        const sharedModelsList = document.getElementById('shared-models-list');
        const closeSharedPageBtn = document.getElementById('close-shared-page');
        const customBaseUrlInput = document.getElementById('custom-base-url');
        const saveBaseUrlBtn = document.getElementById('save-base-url');
        const appUrlSpan = document.getElementById('app-url');
        
        // Ø¹Ù†Ø§ØµØ± Ù†Ø§ÙØ°Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙˆØ±
        const editImageModal = document.getElementById('edit-image-modal');
        const editImageTitle = document.getElementById('edit-image-title');
        const editImageDetails = document.getElementById('edit-image-details');
        const editImageUploadArea = document.getElementById('edit-image-upload-area');
        const editImageInput = document.getElementById('edit-image-input');
        const editImagePreview = document.getElementById('edit-image-preview');
        const editImagePreviewContainer = document.getElementById('edit-image-preview-container');
        const saveImageChangesBtn = document.getElementById('save-image-changes');
        const cancelImageEditBtn = document.getElementById('cancel-image-edit');
        const editUploadProgress = document.getElementById('edit-image-upload-progress');
        const editProgressFill = document.getElementById('edit-progress-fill');
        const editProgressText = document.getElementById('edit-progress-text');
        
        // Ø¹Ù†Ø§ØµØ± Ù†Ø§ÙØ°Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª
        const editModelModal = document.getElementById('edit-model-modal');
        const editModelTitle = document.getElementById('edit-model-title');
        const editModelDescription = document.getElementById('edit-model-description');
        const editModelUploadArea = document.getElementById('edit-model-upload-area');
        const editModelInput = document.getElementById('edit-model-input');
        const editModelPreview = document.getElementById('edit-model-preview');
        const editModelPreviewContainer = document.getElementById('edit-model-preview-container');
        const saveModelChangesBtn = document.getElementById('save-model-changes');
        const cancelModelEditBtn = document.getElementById('cancel-model-edit');
        const editModelUploadProgress = document.getElementById('edit-model-upload-progress');
        const editModelProgressFill = document.getElementById('edit-model-progress-fill');
        const editModelProgressText = document.getElementById('edit-model-progress-text');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
        const statsOrdersTotal = document.getElementById('stats-orders-total');
        const statsOrdersPending = document.getElementById('stats-orders-pending');
        const statsOrdersProgress = document.getElementById('stats-orders-progress');
        const statsOrdersCompleted = document.getElementById('stats-orders-completed');
        const statsModelsTotal = document.getElementById('stats-models-total');
        const statsMessagesTotal = document.getElementById('stats-messages-total');
        
        const quickPending = document.getElementById('quick-pending');
        const quickProgress = document.getElementById('quick-progress');
        const quickCompleted = document.getElementById('quick-completed');
        const quickTotal = document.getElementById('quick-total');
        
        const navTabs = document.querySelectorAll('.nav-tab');
        const pages = document.querySelectorAll('.page');
        
        // ğŸš€ Ø¯Ø§Ù„Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ ImgBB
        async function uploadImageToImgBB(imageFile, progressCallback = null) {
            try {
                console.log('ğŸ“¤ Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ImgBB...');
                
                // Ø¥Ù†Ø´Ø§Ø¡ Form Data
                const formData = new FormData();
                formData.append('image', imageFile);
                formData.append('key', IMGBB_API_KEY);
                
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
                if (progressCallback) {
                    for (let progress = 0; progress <= 100; progress += 20) {
                        setTimeout(() => {
                            progressCallback(progress);
                        }, progress * 30);
                    }
                }
                
                // Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©
                const response = await fetch('https://api.imgbb.com/1/upload', {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error(Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±ÙØ¹: ${response.status});
                }
                
                const data = await response.json();
                
                if (progressCallback) {
                    setTimeout(() => {
                        progressCallback(100, null, data.data.url);
                    }, 1500);
                }
                
                console.log('âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­:', data.data.url);
                return data.data.url;
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ImgBB:', error);
                if (progressCallback) {
                    progressCallback(0, error);
                }
                throw error;
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function initApp() {
            loadData();
            setupEventListeners();
            initFirebase();
            checkLoggedInUser();
            checkSharedPage();
            updateAppUrlInfo();
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function loadData() {
            try {
                orders = JSON.parse(localStorage.getItem('lab_orders')) || [];
                models = JSON.parse(localStorage.getItem('lab_models')) || [];
                messages = JSON.parse(localStorage.getItem('lab_messages')) || [];
                shareLinks = JSON.parse(localStorage.getItem('lab_share_links')) || [];
                activeShareLink = JSON.parse(localStorage.getItem('lab_active_share_link')) || null;
                customBaseUrl = localStorage.getItem('lab_custom_base_url') || null;
                
                orders.sort((a, b) => b.timestamp - a.timestamp);
                models.sort((a, b) => b.timestamp - a.timestamp);
                messages.sort((a, b) => b.timestamp - a.timestamp);
                
                console.log('ğŸ“¥ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©:', {
                    orders: orders.length,
                    models: models.length,
                    messages: messages.length,
                    shareLinks: shareLinks.length,
                    activeShareLink: activeShareLink ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·',
                    customBaseUrl: customBaseUrl || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'
                });
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©:', error);
                orders = []; models = []; messages = []; shareLinks = [];
            }
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveData() {
            try {
                localStorage.setItem('lab_orders', JSON.stringify(orders));
                localStorage.setItem('lab_models', JSON.stringify(models));
                localStorage.setItem('lab_messages', JSON.stringify(messages));
                localStorage.setItem('lab_share_links', JSON.stringify(shareLinks));
                localStorage.setItem('lab_active_share_link', JSON.stringify(activeShareLink));
                if (customBaseUrl) {
                    localStorage.setItem('lab_custom_base_url', customBaseUrl);
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ', 'Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù…Ù…ØªÙ„Ø¦Ø©', 'error');
            }
        }
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
        function getAppBaseUrl() {
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø±Ø§Ø¨Ø· Ù…Ø®ØµØµØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡
            if (customBaseUrl && customBaseUrl.trim() !== '') {
                return customBaseUrl.trim();
            }
            
            // Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
            const currentUrl = window.location.href;
            const url = new URL(currentUrl);
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† localhostØŒ Ø­Ø§ÙˆÙ„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† IP Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
            if (url.hostname === 'localhost' || url.hostname === '127.0.0.1') {
                // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±ØŒ Ù†Ø³ØªØ®Ø¯Ù… localhost
                return ${url.protocol}//${url.host}${url.pathname};
            }
            
            // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ
            return ${url.protocol}//${url.host}${url.pathname};
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function updateAppUrlInfo() {
            const baseUrl = getAppBaseUrl();
            appUrlSpan.textContent = baseUrl;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
            if (customBaseUrlInput) {
                customBaseUrlInput.value = customBaseUrl || '';
            }
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Firebase
        async function checkFirebaseConnection() {
            try {
                const testRef = db.collection('connection_test').doc('test');
                await testRef.set({
                    timestamp: Date.now(),
                    device: currentDeviceName || 'unknown',
                    test: 'success'
                });
                
                console.log('âœ… Ø§ØªØµØ§Ù„ Firebase Ù†Ø§Ø¬Ø­');
                syncIndicator.classList.remove('offline');
                syncIndicator.classList.add('syncing');
                syncStatusText.textContent = 'Ù…Ø²Ø§Ù…Ù†Ø© Ù†Ø´Ø·Ø©';
                return true;
            } catch (error) {
                console.error('âŒ ÙØ´Ù„ Ø§ØªØµØ§Ù„ Firebase:', error);
                syncIndicator.classList.remove('syncing');
                syncIndicator.classList.add('offline');
                syncStatusText.textContent = 'ØºÙŠØ± Ù…ØªØµÙ„';
                return false;
            }
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        async function initFirebase() {
            try {
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                db = firebase.firestore();
                storage = firebase.storage();
                firebaseInitialized = true;
                
                // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
                db.settings({
                    cacheSizeBytes: firebase.firestore.CACHE_SIZE_UNLIMITED
                });
                
                const connected = await checkFirebaseConnection();
                
                if (connected) {
                    setupFirebaseListeners();
                    showNotification('ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­', 'Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© Ù…ÙØ¹Ù„Ø©', 'sync');
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Firebase:', error);
                syncIndicator.classList.add('offline');
                syncStatusText.textContent = 'ØºÙŠØ± Ù…ØªØµÙ„';
            }
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Firebase
        function setupFirebaseListeners() {
            if (!firebaseInitialized) return;
            
            console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙÙˆØ±ÙŠØ©...');
            
            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø·Ù„Ø¨Ø§Øª
            db.collection('orders')
                .orderBy('timestamp', 'desc')
                .limit(100)
                .onSnapshot((snapshot) => {
                    console.log('ğŸ“¦ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Firestore:', snapshot.size);
                    let hasChanges = false;
                    
                    snapshot.docChanges().forEach((change) => {
                        const orderData = change.doc.data();
                        const existingIndex = orders.findIndex(o => o.id === orderData.id);
                        
                        if (change.type === 'added' || change.type === 'modified') {
                            if (existingIndex === -1) {
                                orders.unshift(orderData);
                                hasChanges = true;
                                if (change.type === 'added') {
                                    showNotification('Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯', orderData.title, 'sync');
                                    playNotificationSound();
                                }
                            } else {
                                orders[existingIndex] = orderData;
                                hasChanges = true;
                            }
                        } else if (change.type === 'removed') {
                            orders = orders.filter(o => o.id !== orderData.id);
                            hasChanges = true;
                        }
                    });
                    
   